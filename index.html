<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>NewsMap</title>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="content-script-type" content="text/javascript"/>
    <meta http-equiv="content-style-type" content="text/css"/>
    <meta http-equiv="content-language" content="de"/>

    <link rel="stylesheet" type="text/css" href="css/newsmapstyle.css"/>
    <link rel="stylesheet" href="css/foundation.css"/>
    <link rel="stylesheet" href="css/foundation-icons/foundation-icons.css"/>
    <link rel="stylesheet" type="text/css" href="leaflet_markercluster_07/dist/markercluster.css"/>
    <link rel="stylesheet" type="text/css" href="leaflet_markercluster_07/dist/markercluster_default.css"/>

    <script src="js/vendor/modernizr.js"></script>
    <script src="js/leaflet.js"></script>
    <script src="js/vendor/jquery.js"></script>
    <script src="leaflet_markercluster_07/dist/leaflet.markercluster.js"></script>
    <script src="libs/jquery.dotdotdot.min.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css"/>

</head>
<body>
<div class="text-center" id="loading">
    <span>Lade Nachrichten...</span>
</div>
<script>
    $(document).ready(function () {
        $(".entry-summary").dotdotdot({
            //	configuration goes here
        });
    });
    // PUUUUSHHHHHH #warumgehtderscheissned

    /*getArticleByTitle();
     getArticleByLocation();
     getArticleByLocation();*/

    /*
     fur parameter tag, title oder location den wert des input felds mitgeben;
     das auslesen der xml-datei ist jetzt nicht mehr nötig (kann auskommentiert werden),
     man bekommt alle notwendigen daten in der jeweiligen success funktion.
     Man könnte input felder für location (gibt es schon), tag bzw. kategorie suche machen (gibt es auch)
     und zusätzlich noch ein input feld für die Suche nach dem Titel eines Artikels
     (Oder ein input-feld wo man zwischen tag/kategorie und Titel, bspw. mit nem radio-button auswählen kann).
     Tags und Titel könnte man in den jeweiligen input feldern mit Autocomplete machen.
     Also die jeweiligen Funktionen werden bei .change-event auf dem jeweiligen input feld-aufgerufen
     und die ergebnisse aus der success-funktion dann in einem autocomplete angezeigt und auswählbar gemacht.
     die Funktionen müssen noch in da entsprechende Modul , glaub drawmap oder noch ein modul erstellen für das Abrufen der Daten.
     */
    function getArticleByTag() {
        $.ajax({
            type: "GET",
            url: "http://" + location.host + "/NewsMap/get_data.php",
            data: {func: "tag", tag: "person"},
            success: function (data) {
                if (data.length == 0) {
                    console.log("Keine Ergebnisse");
                }
                else
                    console.log("TAG-SUCHE: SQL-AJAX-Ergebnisse", JSON.parse(data));
            },
            error: function () {
                alert("error");
            }
        });
    }

    function getArticleByTitle() {
        $.ajax({
            type: "GET",
            url: "http://" + location.host + "/NewsMap/get_data.php",
            data: {func: "title", title: "burgkunstadt"},
            success: function (data) {
                if (data.length == 0) {
                    console.log("Keine Ergebnisse");
                }
                else
                    console.log("TITLE-SUCHE: SQL-AJAX-Ergebnisse", JSON.parse(data));
            },
            error: function () {
                alert("error");
            }
        });
    }

    function getArticleByLocation() {
        $.ajax({
            type: "GET",
            url: "http://" + location.host + "/NewsMap/get_data.php",
            data: {func: "location", location: "burgkunstadt"},
            success: function (data) {
                if (data.length == 0) {
                    console.log("Keine Ergebnisse");
                }
                else
                    console.log("LOCATION-SUCHE: SQL-AJAX-Ergebnisse", data);
            },
            error: function () {
                alert("error");
            }
        });
    }
</script>
<div id="header">


    <div>
        <div class="large-3 columns">
            <ul id="menu-list">
                <li data-show="search"><i class="fi-magnifying-glass"></i></li>
                <li data-show="location"><i class="fi-marker"></i></li>
                <!--<li data-show="video"><i class="fi-video"></i></li>
                <li data-show="text"><i class="fi-clipboard-notes"></i></li>
                <li data-show="image"><i class="fi-puzzle"></i></li>
                <li data-show="share" id="share-button"><i class="fi-share"></i></li>-->
            </ul>
        </div>
        <div class="large-9 columns">
            <div id="search-wrapper" class="menu-item">
                <div class="row">
                    <div class="large-3 columns">
                        <input type="text" id="tag-search-input"></div>
                    <div class="large-3 columns">
                        <select id="search-select">
                            <option value="tag">Suche nach Begriff</option>
                            <option value="location">Suche nach Ort</option>
                            <option value="title">Suche nach Titel</option>
                        </select>
                    </div>
                    <div class="large-3 columns">
                        <select id="date-select">
                            <option value="last-week">letzte Woche</option>
                            <option value="entire-time">gesamter Zeitraum</option>
                            <option value="today">Heute</option>
                            <option value="yesterday">Gestern</option>

                            <option value="last-four-weeks">letzten vier Wochen</option>
                        </select>
                    </div>
                    <div class="large-3 columns">
                        <button id="search-button">Suchen</button>
                    </div>
                </div>
                <ul id="autocomplete">
                </ul>
            </div>
        </div>
        <div class="menu-item" id="location-wrapper">
            <div id="location-start" class="text-center">
                <div class="row">
                    <div class="small-12 large-4 columns">
                        <button id="identify-location" class="tiny">Eigenen Standort ermitteln</button>
                    </div>
                    <div class="small-12 large-4 columns">
                        <span class="text-center"><b>oder</b></span>
                    </div>
                    <div id="location-input" class="small-12 large-4 columns">
                        <div id="location-start-wrapper">
                            <div class="postfix-round row collapse" id="loc-start-margin">

                                <input name="myInput" id="loc-start-inp" type="text" placeholder="Ort/PLZ/Region">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                </div>
                <br>
            </div>
        </div>
        <div class="menu-item" id="video-wrapper">
            <button>Nach Video suchen</button>
        </div>
        <div class="menu-item" id="text-wrapper">
            <button>Nach Texten suchen</button>
        </div>
        <div class="menu-item" id="image-wrapper">
            <button>kaa</button>
        </div>

    </div>
</div>
<script></script>
<!--<div id="menu-right">
    <div id="menu-items">
        <div id="close-menu"><i class="fi-x"></i></div>
        <div class="menu-item" id="search-wrapper">
            <input type="text">
            <button>Suchen</button>
        </div>
        <div class="menu-item" id="location-wrapper">
            <div id="location-start" class="text-center">
                <div class="row">
                    <div class="small-12 large-4 columns">
                        <button id="identify-location">Eigenen Standort ermitteln</button>
                    </div>
                    <div class="small-12 large-4 columns">
                        <span class="text-center"><b>oder</b></span>
                    </div>
                    <div id="location-input" class="small-12 large-4 columns">
                        <div id="location-start-wrapper">
                            <div class="postfix-round row collapse" id="loc-start-margin">

                                <input name="myInput" id="loc-start-inp" type="text" placeholder="Ort/PLZ/Region">
                            </div>
                            <ul id="autocomplete">
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">

                </div>
                <br>

            </div>
        </div>
        <div class="menu-item" id="video-wrapper">
            <button>Nach Video suchen</button>
        </div>
        <div class="menu-item" id="text-wrapper">
            <button>Nach Texten suchen</button>
        </div>
        <div class="menu-item" id="image-wrapper">
            <button>kaa</button>
        </div>
        <div class="menu-item" id="share-wrapper">
            <button>Teilen</button>
        </div>
    </div>
    <ul id="menu-list">
        <li data-show="search"><i class="fi-magnifying-glass"></i></li>
        <li data-show="location"><i class="fi-marker"></i></li>
        <li data-show="video"><i class="fi-video"></i></li>
        <li data-show="text"><i class="fi-clipboard-notes"></i></li>
        <li data-show="image"><i class="fi-puzzle"></i></li>
        <li data-show="share"><i class="fi-share"></i></li>
    </ul>
</div>-->
<div id="map">
</div>

<div id="share-menu">


    <!--  <a class="button" id="mailButton" href="javascript:NewsMap.DrawMap.setUpEmailLink()" target="_blank"> Mail</a>
    -->
    <a class="button" id="mailButton" href="mailto:blala@bla.de" target="_blank"> Mail</a>
    <br/>

    <a class="button" href="javascript:NewsMap.DrawMap.fbshareCurrentPage()" target="_blank" alt="Share on Facebook">Facebook</a>

    <br/>
    <a class="button" id="twitter-button" href="javascript:NewsMap.DrawMap.twitterCurrentArticle()" target="_blank"
       alt="Share on Twitter">Twitter</a>

</div>

<article id="menu-left">
    <div id="close-preview"><i class="fi-x"></i></div>
    <img src="http://blog.xebialabs.com/wp-content/uploads/2015/01/news.jpg" width="485" height="209"
         alt="">

    <h2 class="entry-title"><a class="preview-link" target="_blank"
                               href="http://lokalreporter.idvl.de/digitales-gruenderzentrum-zwei-standorte-in-oberfranken-geplant-41309/"
                               rel="bookmark"><span class="title">Digitales Gründerzentrum: Zwei Standorte in Oberfranken geplant</span></a>
    </h2>
    <div class="pub-date">DATUMN</div>
    <br>
    <div class="entry-summary">
        Dies betrifft auch die Kraftfahrzeugzulassungsstelle, die Infothek, den Fachbereich Gesundheitswesen und die
        Volkshochschule Bamberg-Land. (…)
    </div>

    <button id="read-more-button"><a class="more-link"
                                     href="http://lokalreporter.idvl.de/wegen-einer-personalversammlung-ist-das-landratsamt-bamberg-am-mittwoch-16-dezember-2015-ab-1300-uhr-geschlossen-41413/"
                                     rel="bookmark">Weiterlesen</a></button>
    <div class="button" id="share-button"><i class="fi-share"></i></div>
</article>


<script src="js/foundation.min.js"></script>

<script type="text/javascript" src="src/index/NewsMap.js"></script>
<script type="text/javascript" src="src/index/MainController.js"></script>
<script type="text/javascript" src="src/index/NewsMapModal.js"></script>
<script type="text/javascript" src="src/index/NewsMapView.js"></script>
<script type="text/javascript" src="src/index/DrawMap.js"></script>
<script type="text/javascript" src="src/index/DataObjectFactory.js"></script>

<script>
    $(document).foundation();
    $(function () {
        NewsMap.init();
    });
</script>

</body>
</html>